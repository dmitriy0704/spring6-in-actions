# Введение в Spring

## Spring IoC-контейнер

IoC также известен как внедрение зависимостей (DI). Это процесс, при котором
объекты определяют свои зависимости (то есть другие объекты, с которыми они
работают) только через аргументы конструктора, аргументы фабричного метода или
свойства, которые устанавливаются на экземпляр объекта после его создания или
возврата фабричным методом. Затем контейнер внедряет эти зависимости при
создании бина. Данный процесс по своей сути является инверсией (отсюда и
название, инверсия контроля (Inversion of Control)) самого бина, самостоятельно
контролирующего создание или размещение его зависимостей с помощью прямого
построения классов или такого механизма, как шаблон локатора служб (Service
Locator).

Пакеты org.springframework.beans и org.springframework.context являются основой
для IoC-контейнера Spring Framework. Интерфейс BeanFactory предоставляет
расширенный механизм конфигурации, способный управлять объектами любого типа.
ApplicationContext является подинтерфейсом BeanFactory. В нем добавляются:

- Более простая интеграция с функциями АОП в Spring
- Обработка ресурсов сообщений (для использования в интернационализации)
- Публикация событий
- Контексты, специфичные для уровня приложений, такие как WebApplicationContext
  для использования в веб-приложениях.

BeanFactory обеспечивает основу конфигурации и базовый функционал, а
ApplicationContext добавляет более специфичную корпоративную функциональность.
ApplicationContext является полным расширенным набором BeanFactory

Бин (bean) - это объект, который создается, компонуется и управляется
IoC-контейнером Spring.

### Кратко о контейнерах

Интерфейс org.springframework.context.ApplicationContext представляет
IoC-контейнер Spring и отвечает за создание экземпляра, настройку и компонование
бинов. Контейнер получает инструкции о том, какие объекты создавать,
конфигурировать и компоновать путем считывания конфигурационных метаданных.
Конфигурационные метаданные представлены в виде XML, аннотаций Java или кода
Java. Это позволяет выражать объекты, составляющие приложение, и богатую
взаимозависимость между этими объектами.

Несколько реализаций интерфейса ApplicationContext поставляются вместе с Spring.
В автономных приложениях обычно создается экземпляр
`ClassPathXmlApplicationContext` или `FileSystemXmlApplicationContext`. Хотя XML
является традиционным форматом для определения конфигурационных метаданных,
можно указать контейнеру использовать аннотации Java или код в качестве формата
метаданных, предоставив небольшой объем конфигурации XML для декларативного
включения поддержки этих дополнительных форматов метаданных.

### Конфигурационные метаданные

Эти конфигурационные метаданные представляют собой то, каким образом вы, как
разработчик приложения, сообщаете контейнеру Spring о том, как нужно создавать,
конфигурировать и компоновать объекты в вашем приложении.

**_Конфигурация на основе аннотаций_**. Так же в Spring с версии 2.5 появилась
поддержка конфигурационных метаданных на основе аннотаций. Конфигурация на
основе Java. Начиная со Spring 3.0, многие функции, предоставляемые проектом
Spring JavaConfig, стали частью ядра Spring Framework. Таким образом, можно
определять бины, которые являются внешними по отношению к классам вашего
приложения, используя Java, а не XML-файлы. Аннотации: @Configuration, @Bean,
@Import и @DependsOn.

Конфигурация Spring состоит минимум из одного, но, как правило, все же более чем
одного определения бина, которыми контейнер должен управлять. Конфигурационные
метаданные на основе XML настраивают эти бины как элементы <bean/> внутри
элемента <bean/> верхнего уровня. В конфигурации Java обычно используются методы
с описанием @Bean в классе @Configuration.


Базовая структура конфигурационных метаданных на основе XML:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    https://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="..." class="...">  
        <!-- взаимодействующие объекты (collaborators) и конфигурация для этого бина находятся здесь -->
    </bean>
    <bean id="..." class="...">
        <!-- взаимодействующие объекты (collaborators) и конфигурация для этого бина находятся здесь -->
    </bean>
    <!-- еще определения бинов смотрите здесь -->
</beans>

<!-- Атрибут id - это строка, которая идентифицирует определение отдельного бина.-->
<!-- Атрибут class определяет тип бина и использует полное имя класса.-->
```

## Создание экземпляра IoC-контейнера

