# Введение в Spring

## Модули

- **Spring Core**. Контейнер компонентов Spring Beans и поддерживающие утилиты.
- **Spring Context**. Интерфейс ApplicationContext, пользовательский интерфейс,
  проверка достоверности, интерфейс JNDI, компоненты Eпterprise JavaBeaпs (EJB),
  удаленное взаимодействие и поддержка почты.
- **Spring ОАО**. Поддержка инфраструктуры обработки транзакций, интерфейса Java
  Database Coппectivity (JDBC) и объектов доступа к данным (DAO).
- **Spring ORM**. Поддержка технологий Hibernate, iBATIS и Java Data Objects (
  JDO).
- **Spring АОР**. Реализация аспектно-ориентированного программирования (АОП),
  согласованная с набором интерфейсов АОР Alliance.
- **Spring Web**. Базовые средства интеграции, включая составные функциональные
  средства, инициализацию контекста с помощью приемников сервлетов и
  неб-ориентированный контекст приложений.
- **Spring Web МVС**. Каркас для построения веб-приложений по проектному
  шаблону "модель-представление-контроллер" (Model-View-Controller - МУС).

## Инверсия управления и внедрение зависимостей

### Типы инверсии управления

- **_Поиск зависимостей_** - является намного более традиционным подходом и на  
  первый взгляд выглядит более знакомым тем, кто программирует на Java.
- **_Внедрения зависимостей_** - в действительности обеспечивает более высокую
  гибкость и удобство применения по сравнению с поиском зависимостей, хотя
  поначалу он кажется нелогичным.

Если инверсия управления реализуется как поиск зависимостей, то компонент
должен получить ссылку на зависимость, тогда как при внедрении зависимостей
последние внедряются в компонент контейнером инверсии управления.
У **_поиска зависимостей_** имеются две разновидности: 
- извлечение зависимостей и
- контекстный поиск зависимостей (CDL). 

И у **_внедрения зависимостей_** имеются две разновидности: 
- через конструктор и 
- через метод установки.

### Извлечение зависимостей

Извлечение зависимостей предоставляется и в каркасе Spring как механизм для
извлечения компонентов, которыми он управляет.

```java
public class DependencyPull {
    public static void main(String... args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext
                ("spring/app-context.xml");
        MessageRenderer mr = ctx.getBean("renderer", MessageRenderer.class);
        mr.render();
    }
}
```

### Контекстный поиск зависимостей

В известной мере контекстный поиск зависимостей (CDL) подобен извлечению
зависимостей, но в этом случае поиск осуществляется в контейнере, управляющем
ресурсом, а не только в каком-то центральном реестре. Как правило, контекстный 
поиск зависимостей производится в установленной точке.
Механизм контекстного поиска приводится в действие через реализацию в компоненте
интерфейса:

```java
public interface ManagedComponent {
  void performLookup(Container container);
}
```

Реализуя этот интерфейс, компонент извещает контейнер, что ему требуется 
получить зависимость. Контейнер обычно предоставляется базовым сервером 
приложений (например, Tomcat или JBoss) или каркасом (в частности, Spring).
Интерфейс Container, предоставляющий услуги поиска зависимостей:

```java
public interface Container {
        Object getDependency(String key);
}
```

Как только контейнер будет готов передать зависимости компоненту, он вызовет
метод performLookup() по очереди для каждого компонента. И тогда компонент
сможет искать свои зависимости, используя интерфейс Container:
```java
    public class ContextualizedDependencyLookup implements ManagedComponent {
        private Dependency dependency;
        
        @Override
        public void performLookup(Container container){
            this.dependency = (Dependency) 
                  container.getDependency("myDep");
        }
      
        @Override
        public String toString(){
            return dependency.toString();
        }        
    }

```

### Внедрение зависимостей через конструктор

Внедрение зависимостей через конструктор происходит в том случае, когда 
зависимости предоставляются компоненту в его конструкторе (или нескольких 
конструкторах). С этой целью в компоненте объявляется один или ряд конструкторов,
получающих в качестве аргументов его зависимости, а контейнер инверсии 
управления передает зависимости компоненту при получении его экземпляра, 
как показано в приведенном ниже фрагменте кода. Очевидно, что вследствие 
внедрения зависимостей через конструктор объект не может быть создан без 
зависимостей, а следовательно, они обязательны.

```java
    public class ConstructionInjection{
        private Dependency dependency; 
        public ConstructorInjection(Dependency dependency){
            this.dependency = dependency;
        }

        @Override
        public String toString () {
          return dependency.toString();
        }
    }

```

### Внедрение зависимостей через метод установки

При внедрении зависимостей через метод установки контейнер инверсии управления 
внедряет зависимости компонента через методы установки в стиле компонентов 
JavaBeans. Методы установки компонента отражают зависимости, которыми может 
управлять контейнер инверсии управления. В приведенном ниже фрагменте кода
показан типичный компонент, основанный на внедрении зависимостей через метод
установки. Очевидно, что вследствие внедрения зависимостей через метод установки
объект может быть создан без зависимостей, которые могут быть предоставлены в
дальнейшем через вызов метода установки.

```java
class SetterInjection{
    private Dependency dependency;     
    public void setDependency(Dependency dependency){
        this.dependency = dependency;
    }     
    @Override
    public String toString(){
        return dependency.toString;
    }
}
```
 
## Инверсия управления в Spring

